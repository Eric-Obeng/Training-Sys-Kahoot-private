<div class="container">

    <div class="container-with-list">
        <app-searchbar 
            [title]="'Cohort'" 
            [placeholder]="'Name, email'" 
            [hide]="false"
            (addCohortClicked)="goToCreateCohort()"
            (searchChanged)="onSearchChange($event)"
            (sortClicked)="onSortList()" 
            (activeStatus)="filterByActive()"
            (inactiveStatus)="filterByInactive()"
            (deactivatedStatus)="filterByDeactivated()"
            (resetStatus)="clearStatusFilter()"
            (specializationFilter)="filterBySpecialization($event)"
            (resetSpecialization)="clearSpecializationFilter()"
        />
        <div class="divider"></div>

        @if(cohort$ | async; as cohort) {
            <div class="title-enrolled">
                <span>{{cohort.cohortName}}</span>
                <span>{{ cohort.enrollmentCount }} Enrolled</span>
            </div>
        }

        <div class="divider-2"></div>

        <div>
            <div class="list-wrapper">
                <div class="headers">
                    <div>Name</div>
                    <div>Status</div>
                    <div>Contact</div>
                    <div>Specialization</div>
                    <div>Date Added</div>
                    <div></div>
                </div>
                <div class="scroll-list-wrapper">
                    @if(filteredTrainees$ | async; as filteredTrainees) {
                        @for(trainee of filteredTrainees; track trainee) {
                            <div class="list">
                                <div class="trainee-name">{{trainee.fullName}}</div>
                                <div class="status">
                                    <!-- <span class="traineeActive">{{trainee.status}}</span> -->
                                    <span *ngIf="trainee.status === 'Active'" class="traineeActive">{{trainee.status}}</span>
                                    <span *ngIf="trainee.status === 'Inactive'" class="traineeInactive">{{trainee.status}}</span>
                                    <span *ngIf="trainee.status === 'Deactivated'" class="traineeDeactivated">{{trainee.status}}</span>
                                </div>
                                <div class="contact">
                                    <div class="email">
                                        <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <g clip-path="url(#clip0_128_1644)">
                                            <path d="M16.712 15.2493H2.0878C1.1541 15.2493 0.400391 14.4956 0.400391 13.5619V3.43741C0.400391 2.50371 1.1541 1.75 2.0878 1.75H16.712C17.6457 1.75 18.3995 2.50371 18.3995 3.43741V13.5619C18.3995 14.4956 17.6457 15.2493 16.712 15.2493ZM2.0878 2.87494C1.77282 2.87494 1.52533 3.12243 1.52533 3.43741V13.5619C1.52533 13.8769 1.77282 14.1244 2.0878 14.1244H16.712C17.027 14.1244 17.2745 13.8769 17.2745 13.5619V3.43741C17.2745 3.12243 17.027 2.87494 16.712 2.87494H2.0878Z" fill="#676767"/>
                                            <path d="M9.39982 10.704C8.61236 10.704 7.8924 10.3891 7.35243 9.81534L1.44649 3.53816C1.23275 3.31317 1.244 2.95319 1.46898 2.73945C1.69397 2.52572 2.05395 2.53696 2.26769 2.76195L8.17364 9.03913C8.81485 9.72534 9.98479 9.72534 10.626 9.03913L16.532 2.7732C16.7457 2.54821 17.1057 2.53696 17.3307 2.7507C17.5556 2.96444 17.5669 3.32442 17.3532 3.54941L11.4472 9.82659C10.9072 10.4003 10.1873 10.7153 9.39982 10.7153V10.704Z" fill="#676767"/>
                                            </g>
                                            <defs>
                                            <clipPath id="clip0_128_1644">
                                            <rect width="18" height="15.7492" fill="white" transform="translate(0.399902 0.625)"/>
                                            </clipPath>
                                            </defs>
                                        </svg>
                                        <span>{{ trainee.email }}</span>
                                    </div>
                                    <div class="telephone">
                                        <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1.97078 5.88745C1.68428 4.00045 3.01478 2.30545 5.04728 1.68445C5.40797 1.57492 5.79682 1.60666 6.13497 1.77323C6.47313 1.9398 6.73528 2.22874 6.86828 2.58145L7.52078 4.32145C7.62582 4.60137 7.64481 4.90629 7.57532 5.19708C7.50583 5.48787 7.35103 5.75127 7.13078 5.95345L5.18978 7.73095C5.09398 7.81866 5.02261 7.92975 4.98264 8.05333C4.94267 8.17691 4.93548 8.30875 4.96178 8.43595L4.97978 8.51395L5.02628 8.70895C5.26827 9.65622 5.63604 10.5668 6.11978 11.4165C6.64796 12.3186 7.30261 13.1404 8.06378 13.8569L8.12378 13.9109C8.22068 13.997 8.33821 14.0564 8.46492 14.0835C8.59163 14.1106 8.72319 14.1043 8.84678 14.0654L11.3563 13.2749C11.6415 13.1854 11.9469 13.1831 12.2334 13.2684C12.5199 13.3536 12.7744 13.5225 12.9643 13.7534L14.1523 15.195C14.6473 15.7949 14.5873 16.6769 14.0188 17.2064C12.4633 18.6569 10.3243 18.9539 8.83628 17.7584C7.01155 16.288 5.47381 14.4934 4.30028 12.4649C3.11526 10.4391 2.32585 8.20738 1.97078 5.88745ZM6.53378 8.53495L8.14178 7.05895C8.58253 6.65475 8.89243 6.12805 9.03168 5.54646C9.17093 4.96487 9.13318 4.35493 8.92328 3.79495L8.27228 2.05495C8.00521 1.34511 7.47795 0.763542 6.7976 0.428383C6.11725 0.0932242 5.33484 0.0296057 4.60928 0.25045C2.08478 1.02295 0.0582786 3.28645 0.487279 6.11395C0.787279 8.08795 1.47878 10.599 3.00428 13.221C4.27045 15.4081 5.9292 17.343 7.89728 18.9284C10.1293 20.7209 13.1083 20.1089 15.0433 18.3059C15.5969 17.7904 15.933 17.0831 15.9829 16.3282C16.0328 15.5733 15.7928 14.8279 15.3118 14.2439L14.1238 12.8009C13.7437 12.3397 13.2346 12.0024 12.6616 11.8324C12.0886 11.6625 11.4779 11.6675 10.9078 11.8469L8.82428 12.5024C8.28629 11.9478 7.81509 11.3321 7.42028 10.6679C7.0393 9.99628 6.74208 9.28044 6.53528 8.53645" fill="#676767"/>
                                        </svg>
                                        <span>{{ trainee.contact }}</span>
                                    </div>
                                </div>
                                <div class="specialization">
                                    <span>{{ trainee.specialization }}</span>
                                </div>
                                <div class="date-added">
                                    {{trainee.date_added}}
                                </div>
                                <div class="ellipsis" (click)="toggleEllipsis(trainee.fullName, $event)">
                                    <svg width="16" height="4" viewBox="0 0 16 4" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9.5 2C9.5 2.29667 9.41203 2.58668 9.2472 2.83336C9.08238 3.08003 8.84812 3.27229 8.57403 3.38582C8.29994 3.49935 7.99834 3.52906 7.70737 3.47118C7.41639 3.4133 7.14912 3.27044 6.93934 3.06066C6.72956 2.85088 6.5867 2.58361 6.52882 2.29264C6.47094 2.00166 6.50065 1.70006 6.61418 1.42598C6.72771 1.15189 6.91997 0.917618 7.16665 0.752796C7.41332 0.587974 7.70333 0.5 8 0.5C8.39783 0.5 8.77936 0.658036 9.06066 0.93934C9.34196 1.22064 9.5 1.60218 9.5 2ZM1.625 0.5C1.32833 0.5 1.03832 0.587974 0.791646 0.752796C0.544972 0.917618 0.352713 1.15189 0.239181 1.42598C0.12565 1.70006 0.0959449 2.00166 0.153823 2.29264C0.211701 2.58361 0.354562 2.85088 0.564341 3.06066C0.774119 3.27044 1.04139 3.4133 1.33237 3.47118C1.62334 3.52906 1.92494 3.49935 2.19903 3.38582C2.47311 3.27229 2.70738 3.08003 2.87221 2.83336C3.03703 2.58668 3.125 2.29667 3.125 2C3.125 1.60218 2.96697 1.22064 2.68566 0.93934C2.40436 0.658036 2.02283 0.5 1.625 0.5ZM14.375 0.5C14.0783 0.5 13.7883 0.587974 13.5416 0.752796C13.295 0.917618 13.1027 1.15189 12.9892 1.42598C12.8757 1.70006 12.8459 2.00166 12.9038 2.29264C12.9617 2.58361 13.1046 2.85088 13.3143 3.06066C13.5241 3.27044 13.7914 3.4133 14.0824 3.47118C14.3733 3.52906 14.6749 3.49935 14.949 3.38582C15.2231 3.27229 15.4574 3.08003 15.6222 2.83336C15.787 2.58668 15.875 2.29667 15.875 2C15.875 1.60218 15.717 1.22064 15.4357 0.93934C15.1544 0.658036 14.7728 0.5 14.375 0.5Z" fill="#676767"/>
                                    </svg>
                                    <div class="more-options"
                                        *ngIf="selectedTraineeName === trainee.fullName"
                                        [class]="ellipsisClicked? 'ellipsisClicked' : 'ellipsisNotClicked'"
                                    >
                                        <span class="update" *ngIf="trainee.status !== 'Deactivated'">
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M0.548096 17.938H17.4481C17.5807 17.938 17.7079 17.8853 17.8016 17.7915C17.8954 17.6978 17.9481 17.5706 17.9481 17.438C17.9481 17.3054 17.8954 17.1782 17.8016 17.0844C17.7079 16.9907 17.5807 16.938 17.4481 16.938H0.548096C0.415487 16.938 0.28831 16.9907 0.194542 17.0844C0.100774 17.1782 0.0480957 17.3054 0.0480957 17.438C0.0480957 17.5706 0.100774 17.6978 0.194542 17.7915C0.28831 17.8853 0.415487 17.938 0.548096 17.938ZM6.7101 14.18C7.13227 14.0612 7.51756 13.8376 7.8301 13.53L17.3701 3.98999C17.6968 3.662 17.8802 3.21793 17.8802 2.75499C17.8802 2.29205 17.6968 1.84798 17.3701 1.51999L16.4301 0.589989C16.0972 0.2727 15.655 0.0957031 15.1951 0.0957031C14.7352 0.0957031 14.293 0.2727 13.9601 0.589989L4.4201 10.12C4.11246 10.4309 3.89178 10.8171 3.7801 11.24L3.0401 14C3.0053 14.1261 3.00456 14.2591 3.03793 14.3856C3.07131 14.5121 3.13762 14.6275 3.2301 14.72C3.37182 14.8589 3.56168 14.9377 3.7601 14.94L6.7101 14.18ZM7.1201 12.82C6.93568 13.0076 6.7043 13.1423 6.4501 13.21L5.48009 13.47L4.4801 12.47L4.7401 11.5C4.80914 11.2463 4.94363 11.0153 5.1301 10.83L5.5101 10.46L7.5001 12.45L7.1201 12.82ZM8.2101 11.74L6.2201 9.74999L12.9501 3.01999L14.9401 5.00999L8.2101 11.74ZM16.6601 3.28999L15.6501 4.29999L13.6601 2.30999L14.6701 1.28999C14.8107 1.14954 15.0013 1.07065 15.2001 1.07065C15.3988 1.07065 15.5895 1.14954 15.7301 1.28999L16.6601 2.22999C16.7996 2.37113 16.8778 2.56156 16.8778 2.75999C16.8778 2.95842 16.7996 3.14885 16.6601 3.28999Z" fill="#676767"/>
                                            </svg>
                                            <span *ngIf="trainee.status === 'Active'">Set Inactive</span>
                                            <span *ngIf="trainee.status === 'Inactive'">Set Active</span>
                                            <span *ngIf="trainee.status === 'Deactivated'">Reactivate</span>
                                        </span>

                                    </div>
                                </div>
                            </div>
                            <div class="cohort-list-dividers"></div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>

</div>